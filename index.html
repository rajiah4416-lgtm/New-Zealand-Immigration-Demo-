<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Republic of Albania | Global Portal & Consular Services</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        :root { --alb-red: #e41e20; --alb-black: #050505; --soft-gray: #f4f7f6; }
        body { font-family: 'Times New Roman', Times, serif; margin: 0; background: var(--soft-gray); color: #333; scroll-behavior: smooth; }
        
        /* Navigation */
        nav { background: var(--alb-black); padding: 15px 5%; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; border-bottom: 3px solid var(--alb-red); }
        nav a { color: white; text-decoration: none; margin-left: 20px; font-weight: bold; text-transform: uppercase; font-size: 0.85rem; }
        nav .logo { color: var(--alb-red); font-size: 1.2rem; letter-spacing: 2px; }

        /* Hero Section */
        .hero { height: 60vh; background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1555944192-262444983675?auto=format&fit=crop&q=80&w=1600'); background-size: cover; background-position: center; display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; text-align: center; }
        .hero h1 { font-size: 3rem; margin: 0; text-transform: uppercase; }
        .hero p { font-size: 1.2rem; max-width: 600px; margin-top: 10px; }

        /* Content Sections */
        .section { padding: 60px 10%; }
        .visa-container { background: white; padding: 40px; border-radius: 4px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border-top: 10px solid var(--alb-red); }
        
        /* Form Styling */
        .input-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px; }
        .field { margin-bottom: 15px; }
        label { display: block; font-size: 0.75rem; font-weight: bold; margin-bottom: 5px; color: #555; text-transform: uppercase; }
        input, select { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        
        .btn-main { background: var(--alb-red); color: white; border: none; padding: 20px; width: 100%; cursor: pointer; font-weight: bold; font-size: 1rem; border-radius: 4px; margin-top: 20px; transition: 0.3s; }
        .btn-main:hover { background: #b00; transform: translateY(-2px); }

        #photo_prev { width: 140px; height: 180px; border: 2px solid #000; margin-top: 10px; object-fit: cover; display: none; }
        
        /* Tourism Cards */
        .card-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 30px; }
        .info-card { background: white; padding: 20px; border-bottom: 4px solid var(--alb-red); text-align: center; }
        .info-card img { width: 100%; border-radius: 4px; height: 200px; object-fit: cover; }

        footer { background: var(--alb-black); color: #888; text-align: center; padding: 40px; font-size: 0.8rem; }
    </style>
</head>
<body>

<nav>
    <div class="logo">REPUBLIKA E SHQIPËRISË</div>
    <div>
        <a href="#about">About Albania</a>
        <a href="#visa">E-Visa Portal</a>
        <a href="#contact">Contact</a>
    </div>
</nav>

<div class="hero">
    <h1>Albania: Land of the Eagles</h1>
    <p>Discover Mediterranean beauty, ancient history, and modern digital services.</p>
</div>

<div id="about" class="section">
    <h2 style="text-align:center; color: var(--alb-red);">Explore Albania</h2>
    <div class="card-grid">
        <div class="info-card">
            <img src="https://images.unsplash.com/photo-1579822459346-60980ca8c56e?auto=format&fit=crop&q=80&w=600" alt="Ksamil">
            <h3>The Albanian Riviera</h3>
            <p>Crystal clear waters and pristine beaches of Ksamil and Saranda.</p>
        </div>
        <div class="info-card">
            <img src="https://images.unsplash.com/photo-1590425261884-18c949755498?auto=format&fit=crop&q=80&w=600" alt="Tirana">
            <h3>Tirana Capital</h3>
            <p>A vibrant, colorful hub of culture, business, and Mediterranean life.</p>
        </div>
        <div class="info-card">
            <img src="https://images.unsplash.com/photo-1555944192-262444983675?auto=format&fit=crop&q=80&w=600" alt="Berat">
            <h3>Historic Berat</h3>
            <p>The "Town of a Thousand Windows" – a UNESCO World Heritage site.</p>
        </div>
    </div>
</div>

<div id="visa" class="section" style="background: #e9ecef;">
    <div class="visa-container">
        <div style="text-align: center; border-bottom: 2px solid #eee; padding-bottom: 20px;">
            <h2 style="margin:0;">OFFICIAL E-VISA GENERATOR</h2>
            <p style="color: var(--alb-red); font-weight: bold; margin: 5px 0;">Consular Section: Istanbul | Karachi Mission Hub</p>
        </div>

        <div class="input-grid">
            <div class="field">
                <label>Surname, Name (ALL CAPS)</label>
                <input type="text" id="v_name" placeholder="E.G. ALI, RAHAT">
                <label style="margin-top:15px;">Date of Birth</label>
                <input type="date" id="v_dob">
                <label style="margin-top:15px;">Nationality</label>
                <select id="v_nation">
                    <option>PAKISTAN</option>
                    <option>INDIA</option>
                    <option>OTHER</option>
                </select>
            </div>
            <div class="field">
                <label>Passport Number</label>
                <input type="text" id="v_pass" placeholder="ZP1825791">
                <label style="margin-top:15px;">Visa Issue Date</label>
                <input type="date" id="v_issue">
                <label style="margin-top:15px;">Application Reference</label>
                <input type="text" id="v_ref" placeholder="ABL906485OP7">
            </div>
            <div class="field">
                <label>Visa Type</label>
                <select id="v_type">
                    <option value="C">TYPE C (Visit Visa)</option>
                    <option value="D">TYPE D (Employment/Long Stay)</option>
                </select>
                <label style="margin-top:15px;">Applicant Photo</label>
                <input type="file" onchange="upImg(event)">
                <img id="photo_prev">
            </div>
        </div>

        <button class="btn-main" onclick="makeVisa()">FINALISE & DOWNLOAD OFFICIAL E-VISA PDF</button>
    </div>
</div>

<div id="qr_box" style="display:none;"></div>

<footer>
    <p>&copy; 2026 Republic of Albania - Ministry of Interior & Foreign Affairs.</p>
    <p>Official Digital Consular Portal for Karachi Mission.</p>
</footer>

<script>
    let pImg = "";
    function upImg(e) {
        const reader = new FileReader();
        reader.onload = () => { pImg = reader.result; document.getElementById('photo_prev').src = pImg; document.getElementById('photo_prev').style.display = 'block'; };
        reader.readAsDataURL(e.target.files[0]);
    }

    async function makeVisa() {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        const n = document.getElementById('v_name').value.toUpperCase() || "NAME NOT PROVIDED";
        const p = document.getElementById('v_pass').value.toUpperCase();
        const r = document.getElementById('v_ref').value || "ABL-REF-NONE";
        const d = document.getElementById('v_issue').value;
        const dob = document.getElementById('v_dob').value;
        const t = document.getElementById('v_type').value;

        // Document Border
        doc.setLineWidth(0.5); doc.rect(5, 5, 200, 287);
        doc.setFontSize(9); doc.text("Electronic-Visa REPUBLIC OF ALBANIA", 10, 15);
        doc.text("A100018340e", 195, 12, {align:"right"});
        doc.setFont("times", "bold"); doc.text(r, 195, 18, {align:"right"});

        // Red Square Emblem
        doc.setFillColor(228, 30, 32); doc.rect(98, 10, 15, 15, 'F');
        doc.line(5, 32, 205, 32);

        // Photo Integration
        if(pImg) doc.addImage(pImg, 'JPEG', 15, 42, 38, 48);

        // Official Data Fields
        doc.setFontSize(8); doc.setFont("times", "normal");
        const rows = [
            ["E VLEFSHME PER / VALID FOR", "ALBANIA"],
            ["NGA / FROM", d],
            ["DERI / UNTIL", "ONE YEAR FROM ISSUE"],
            ["TIPI VIZES / TYPE OF VISA", t],
            ["NUMRI I PASAPORTES / PASSPORT NO.", p],
            ["MBIEMER, EMER / SURNAME, NAME", n],
            ["LESHUAR NE / ISSUED IN", "KARACHI (Istanbul Consular Mission)"]
        ];

        rows.forEach((row, i) => {
            doc.setFont("times", "normal"); doc.text(row[0], 65, 45 + (i * 11.5));
            doc.setFont("times", "bold"); doc.text(row[1], 120, 45 + (i * 11.5));
        });

        // Professional MRZ Zone
        doc.setFont("courier", "bold"); doc.setFontSize(11);
        const m1 = `P<ALB${n.replace(/ /g, "<")}<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<`.substring(0, 44);
        const m2 = `${p}<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<`.substring(0, 44);
        doc.text(m1, 10, 165); doc.text(m2, 10, 175);

        // QR Code Generator
        const qb = document.getElementById("qr_box"); qb.innerHTML = "";
        new QRCode(qb, { text: "VERIFIED_ALB_VISA:" + r, width: 128, height: 128 });
        
        setTimeout(() => {
            const canv = qb.querySelector('canvas');
            if(canv) doc.addImage(canv.toDataURL("image/png"), 'PNG', 15, 240, 35, 35);
            doc.setFontSize(7); doc.setFont("times", "italic");
            doc.text("Note: This document is generated and sealed by an automatic procedure.", 55, 255);
            doc.save(`Albania_Official_Visa_${n.replace(/ /g, '_')}.pdf`);
        }, 500);
    }
</script>
</body>
</html>
