<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NZ Arrival ID Card Portal</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        :root {
            --nz-blue: #00247d; /* Official Flag Blue */
            --nz-red: #cc142d;  /* Official Flag Red */
            --nz-teal: #008477;
            --card-width: 500px;
        }

        body {
            font-family: 'Segoe UI', Helvetica, sans-serif;
            background-color: #eef2f3;
            margin: 0; padding: 40px 20px;
            display: flex; flex-direction: column; align-items: center;
        }

        /* Administration Input Panel */
        .admin-panel {
            background: white; padding: 25px; border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 40px; width: 100%; max-width: 800px;
        }

        .grid-inputs { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; }
        label { font-size: 11px; font-weight: bold; color: #555; text-transform: uppercase; }
        input { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 5px; margin-top: 5px; box-sizing: border-box; }

        .btn-row { display: flex; gap: 10px; margin-top: 20px; }
        button { flex: 1; padding: 12px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; color: white; transition: 0.2s; }
        .gen-btn { background: var(--nz-teal); }
        .print-btn { background: var(--nz-blue); }
        button:hover { opacity: 0.9; }

        /* THE ID CARD DESIGN */
        #id-card {
            width: var(--card-width);
            height: 315px; /* ID-1 Ratio */
            background: white;
            border-radius: 18px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
            border: 1px solid #ddd;
        }

        /* Top Header with Flag */
        .card-header {
            background: var(--nz-blue);
            height: 75px;
            padding: 0 20px;
            display: flex;
            align-items: center;
            color: white;
            position: relative;
        }

        .nz-flag { width: 60px; height: 30px; border: 1px solid rgba(255,255,255,0.3); margin-right: 15px; }
        
        .header-text h2 { margin: 0; font-size: 16px; letter-spacing: 1px; }
        .header-text p { margin: 0; font-size: 9px; opacity: 0.8; text-transform: uppercase; }

        /* Sub-banner for Visa No */
        .visa-strip {
            background: var(--nz-teal);
            color: white;
            padding: 5px 20px;
            font-size: 12px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
        }

        /* Body Content */
        .card-body { display: flex; padding: 15px 20px; gap: 20px; }

        /* Photo Section */
        .photo-area { display: flex; flex-direction: column; align-items: center; }
        .photo-frame {
            width: 110px; height: 135px;
            background: #f0f0f0;
            border: 2px solid #eee;
            border-radius: 8px;
            overflow: hidden;
            display: flex; align-items: center; justify-content: center;
        }
        #photo-out { width: 100%; height: 100%; object-fit: cover; display: none; }
        .photo-label { font-size: 10px; color: #999; text-align: center; }

        /* Data Section */
        .info-area { flex: 1; }
        .data-point { margin-bottom: 8px; border-bottom: 1px solid #f9f9f9; }
        .data-label { font-size: 8px; color: #888; font-weight: bold; text-transform: uppercase; }
        .data-val { font-size: 13px; font-weight: 700; color: #222; }

        /* QR and Security */
        .security-area {
            position: absolute; bottom: 15px; right: 20px;
            display: flex; flex-direction: column; align-items: center;
        }
        #qrcode { background: white; padding: 4px; border: 1px solid #eee; }

        /* Small Glowing Fern */
        .small-fern {
            position: absolute; top: 10px; right: 20px;
            width: 30px; opacity: 0.6; filter: drop-shadow(0 0 5px var(--nz-teal));
        }

        @media print {
            .admin-panel { display: none !important; }
            body { background: white; padding: 0; }
            #id-card { box-shadow: none; border: 1px solid #ccc; -webkit-print-color-adjust: exact; }
        }
    </style>
</head>
<body>

    <div class="admin-panel">
        <h3 style="margin-top:0">Official ID Data Entry</h3>
        <div class="grid-inputs">
            <input type="text" id="in-name" placeholder="Full Name">
            <input type="text" id="in-visa" placeholder="Visa Number">
            <input type="text" id="in-pass" placeholder="Passport No.">
            <input type="date" id="in-date">
            <input type="text" id="in-co" placeholder="Company Name">
            <input type="file" accept="image/*" onchange="previewPhoto(event)">
        </div>
        <div class="btn-row">
            <button class="gen-btn" onclick="update()">Update ID Card</button>
            <button class="print-btn" onclick="window.print()">Download / Print ID</button>
        </div>
    </div>

    <div id="id-card">
        <div class="card-header">
            <div class="nz-flag" style="background: var(--nz-blue); position: relative; overflow: hidden;">
                <div style="background: white; width: 100%; height: 3px; position: absolute; top: 50%; transform: translateY(-50%);"></div>
                <div style="background: white; height: 100%; width: 3px; position: absolute; left: 50%; transform: translateX(-50%);"></div>
                <div style="color: white; font-size: 10px; position: absolute; right: 5px; top: 5px;">â˜…</div>
            </div>
            <div class="header-text">
                <h2>NEW ZEALAND</h2>
                <p>Immigration & Border Protection</p>
            </div>
            <svg class="small-fern" viewBox="0 0 100 100">
                <path fill="white" d="M80,90 C60,70 30,60 10,80 C20,50 50,20 90,10 C80,40 70,70 80,90 Z" />
            </svg>
        </div>

        <div class="visa-strip">
            <span>OFFICIAL ARRIVAL PASS</span>
            <span id="out-visa">VN-00000000</span>
        </div>

        <div class="card-body">
            <div class="photo-area">
                <div class="photo-frame">
                    <span id="ph-label" class="photo-label">UPLOAD<br>PHOTO</span>
                    <img id="photo-out">
                </div>
            </div>

            <div class="info-area">
                <div class="data-point">
                    <div class="data-label">Name</div>
                    <div class="data-val" id="out-name">---</div>
                </div>
                <div class="data-point">
                    <div class="data-label">Passport No.</div>
                    <div class="data-val" id="out-pass">---</div>
                </div>
                <div class="data-point">
                    <div class="data-label">Arrival Date</div>
                    <div class="data-val" id="out-date">---</div>
                </div>
                <div class="data-point">
                    <div class="data-label">Sponsoring Entity</div>
                    <div class="data-val" id="out-co" style="font-size: 11px;">---</div>
                </div>
            </div>
        </div>

        <div class="security-area">
            <div id="qrcode"></div>
            <div style="font-size: 7px; margin-top: 3px; color: #999;">SECURE VERIFIED</div>
        </div>
    </div>

    <script>
        let qr = new QRCode(document.getElementById("qrcode"), {
            width: 70, height: 70,
            colorDark : "#00247d", colorLight : "#ffffff"
        });

        function previewPhoto(event) {
            const reader = new FileReader();
            reader.onload = function() {
                const output = document.getElementById('photo-out');
                output.src = reader.result;
                output.style.display = 'block';
                document.getElementById('ph-label').style.display = 'none';
            }
            reader.readAsDataURL(event.target.files[0]);
        }

        function update() {
            const v = id => document.getElementById(id).value || "---";
            document.getElementById('out-name').innerText = v('in-name');
            document.getElementById('out-visa').innerText = v('in-visa');
            document.getElementById('out-pass').innerText = v('in-pass');
            document.getElementById('out-date').innerText = v('in-date');
            document.getElementById('out-co').innerText = v('in-co').toUpperCase();

            qr.clear();
            qr.makeCode(`NZ-ID:${v('in-visa')}|${v('in-pass')}`);
        }
        update();
    </script>
</body>
</html>
