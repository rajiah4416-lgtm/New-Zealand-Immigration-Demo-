<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NZ Immigration & HR Sponsorship Suite - Universal QR</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style id="themeStyles">
        :root { 
            --inz-primary: #00247d; 
            --inz-black: #1a1a1a; 
            --page-bg: #f9f9fb; 
        }
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #0b0e11; margin: 0; display: flex; color: #fff; }
        
        /* Sidebar */
        .sidebar { width: 400px; background: #161b22; padding: 25px; height: 100vh; overflow-y: auto; box-sizing: border-box; position: fixed; border-right: 4px solid var(--inz-primary); }
        .sidebar h2 { font-size: 14px; color: #58a6ff; text-transform: uppercase; border-bottom: 1px solid #30363d; padding-bottom: 8px; margin-top: 25px; }
        label { display: block; margin-top: 12px; font-size: 10px; text-transform: uppercase; color: #8b949e; letter-spacing: 1px; }
        input, select, textarea { width: 100%; padding: 10px; margin-top: 5px; border-radius: 6px; border: 1px solid #30363d; background: #0d1117; color: white; font-size: 13px; }
        
        /* Document Preview */
        .preview-area { margin-left: 400px; padding: 40px; width: 100%; display: flex; justify-content: center; }
        .a4-page { 
            width: 210mm; min-height: 297mm; background: var(--page-bg); padding: 20mm; 
            box-shadow: 0 0 50px rgba(0,0,0,0.8); box-sizing: border-box; color: #1a1a1a; position: relative;
            overflow: hidden;
        }

        /* Watermark */
        .watermark {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 120px; color: rgba(0, 0, 0, 0.03); font-weight: bold; pointer-events: none; text-transform: uppercase;
        }

        .flag-header { text-align: center; margin-bottom: 15px; }
        .nz-header { text-align: center; border-bottom: 2px solid var(--inz-black); padding-bottom: 15px; margin-bottom: 20px; }
        .nz-header h1 { margin: 0; font-size: 28px; letter-spacing: 1px; }

        .data-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; }
        .data-card { background: white; border: 1px solid #e1e4e8; padding: 15px; border-radius: 4px; }
        .card-title { font-size: 10px; font-weight: bold; color: var(--inz-primary); text-transform: uppercase; margin-bottom: 10px; border-bottom: 1px solid #f0f0f0; }
        
        .row { display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 6px; border-bottom: 1px dotted #eee; }
        .label { font-weight: 600; color: #555; }

        .legal-statement { 
            margin-top: 30px; padding: 20px; border-left: 5px solid var(--inz-primary); 
            background: #fff; font-size: 13px; font-style: italic; line-height: 1.6;
        }

        .qr-section { 
            margin-top: 40px; display: flex; align-items: center; justify-content: space-between; 
            background: #fff; padding: 20px; border: 1px solid #ddd; border-radius: 8px;
        }
        .qr-info { width: 60%; font-size: 11px; color: #444; }

        .print-btn { 
            width: 100%; padding: 18px; margin-top: 30px; border: none; border-radius: 8px; 
            cursor: pointer; font-weight: bold; background: #238636; color: white; font-size: 16px; 
        }

        @media print { .sidebar { display: none; } .preview-area { margin: 0; } .a4-page { box-shadow: none; } }
    </style>
</head>
<body>

<div class="sidebar">
    <h2>üìÑ Universal Data Injection</h2>
    <label>Issue Date</label>
    <input type="date" id="inIssueDate" oninput="sync()">
    
    <label>Full Client Name</label>
    <input type="text" id="inClName" placeholder="Full Legal Name" oninput="sync()">
    <label>Passport Number</label>
    <input type="text" id="inPass" placeholder="e.g. PK1234567" oninput="sync()">
    <label>Date of Birth</label>
    <input type="date" id="inDOB" oninput="sync()">
    <label>NZ Visa Reference #</label>
    <input type="text" id="inRef" placeholder="Reference ID" oninput="sync()">

    <h2>üè¢ Company & Job Terms</h2>
    <label>Company Name</label>
    <input type="text" id="inCoName" placeholder="Employer Name" oninput="sync()">
    <label>Official Address</label>
    <input type="text" id="inCoAddr" placeholder="Physical NZ Address" oninput="sync()">
    <label>Job Title</label>
    <input type="text" id="inJob" placeholder="e.g. Senior Data Analyst" oninput="sync()">

    <h2>üíº HR Official</h2>
    <input type="text" id="inHRName" placeholder="Manager Name" oninput="sync()">
    <input type="text" id="inHRPhone" placeholder="Contact Phone" oninput="sync()">

    <button class="print-btn" onclick="window.print()">Export Document & QR</button>
</div>

<div class="preview-area">
    <div class="a4-page">
        <div class="watermark">OFFICIAL</div>
        
        <div class="flag-header">
            <img src="https://upload.wikimedia.org/wikipedia/commons/3/3e/Flag_of_New_Zealand.svg" style="width: 90px;">
        </div>

        <div class="nz-header">
            <h1>IMMIGRATION NEW ZEALAND</h1>
            <p style="font-size: 11px; letter-spacing: 2px; margin-top: 5px;">VERIFIED SPONSORSHIP & ARRIVAL RECORD</p>
            <p style="font-size: 10px; color: #666;">Document Issue Date: <span class="outIssueDate">---</span></p>
        </div>

        <div class="data-grid">
            <div class="data-card">
                <div class="card-title">Applicant Identity</div>
                <div class="row"><span class="label">Name:</span> <span class="outClName">---</span></div>
                <div class="row"><span class="label">Passport:</span> <span class="outPass">---</span></div>
                <div class="row"><span class="label">DOB:</span> <span class="outDOB">---</span></div>
                <div class="row"><span class="label">Ref ID:</span> <span class="outRef">---</span></div>
            </div>
            <div class="data-card">
                <div class="card-title">Sponsorship Detail</div>
                <div class="row"><span class="label">Employer:</span> <span class="outCoName">---</span></div>
                <div class="row"><span class="label">Job Title:</span> <span class="outJob">---</span></div>
                <div class="row"><span class="label">Class:</span> <span>AEWV Resident Path</span></div>
                <div class="row"><span class="label">Location:</span> <span>New Zealand</span></div>
            </div>
        </div>

        <div class="legal-statement">
            "We hereby attest that the professional placement for <span class="outClName">Applicant</span> is bona fide and compliant with the statutory mandates of the New Zealand Ministry of Business, Innovation and Employment. Full sponsorship liability is assumed by <span class="outCoName">Employer</span> at their registered office: <span class="outCoAddr">Address</span>."
        </div>

        <div class="qr-section">
            <div class="qr-info">
                <h4 style="margin:0 0 10px 0; color:var(--inz-primary);">UNIVERSAL SCANNER VERIFICATION</h4>
                <p>Scanning the adjacent code provides a full data extraction of this document's metadata. This ensures the veracity of the claim and prevents fraudulent replication.</p>
                <p style="margin-top:10px; font-weight:bold;">Authorized by: <span class="outHRName">---</span> | <span class="outHRPhone">---</span></p>
            </div>
            <div style="text-align: center;">
                <div id="universalQR"></div>
                <div style="font-size:7px; margin-top:5px;">SECURE DIGITAL ANCHOR</div>
            </div>
        </div>

        <div style="position: absolute; bottom: 15mm; left: 20mm; right: 20mm; font-size: 9px; color: #999; text-align: center; border-top: 1px solid #ddd; padding-top: 10px;">
            This is an official digital record. To confirm status, visit <strong>www.immigration.govt.nz</strong> and enter the Reference ID shown above.
        </div>
    </div>
</div>

<script>
    let qr = new QRCode(document.getElementById("universalQR"), { width: 110, height: 110, correctLevel: QRCode.CorrectLevel.H });

    function sync() {
        const data = {
            outIssueDate: document.getElementById('inIssueDate').value || '---',
            outClName: document.getElementById('inClName').value || '---',
            outPass: document.getElementById('inPass').value || '---',
            outDOB: document.getElementById('inDOB').value || '---',
            outRef: document.getElementById('inRef').value || '---',
            outCoName: document.getElementById('inCoName').value || '---',
            outCoAddr: document.getElementById('inCoAddr').value || '---',
            outJob: document.getElementById('inJob').value || '---',
            outHRName: document.getElementById('inHRName').value || '---',
            outHRPhone: document.getElementById('inHRPhone').value || '---'
        };

        for (const [key, value] of Object.entries(data)) {
            document.querySelectorAll('.' + key).forEach(el => el.innerText = value);
        }

        // FULL DATA INJECTION INTO QR
        const qrString = `
NZ IMMIGRATION VERIFICATION
---------------------------
ISSUE DATE: ${data.outIssueDate}
APPLICANT: ${data.outClName}
PASSPORT: ${data.outPass}
DOB: ${data.outDOB}
REF ID: ${data.outRef}
COMPANY: ${data.outCoName}
POSITION: ${data.outJob}
HR AUTH: ${data.outHRName} (${data.outHRPhone})
---------------------------
STATUS: OFFICIALLY SPONSORED
        `.trim();

        qr.makeCode(qrString);
    }

    document.getElementById('inIssueDate').value = new Date().toISOString().split('T')[0];
    sync();
</script>
</body>
</html>
