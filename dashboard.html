<!DOCTYPE html>
<html>
<head>
    <title>Bank Statement Generator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        /* Styles to mimic a bank layout */
        #statement { width: 800px; padding: 40px; background: white; font-family: Arial; }
        .header { border-bottom: 2px solid #000; display: flex; justify-content: space-between; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { background: #f2f2f2; border: 1px solid #ddd; padding: 8px; text-align: left; }
        td { border: 1px solid #ddd; padding: 8px; font-size: 12px; }
        .credit { color: green; }
        .debit { color: red; }
    </style>
</head>
<body>

    <div id="statement">
        <div class="header">
            <div>
                <h1>COMMERCIAL BANK LTD</h1>
                <p>Branch Code: 0123 | Karachi, Pakistan</p>
            </div>
            <div style="text-align: right;">
                <p><strong>Account Title:</strong> <span id="outName">John Doe</span></p>
                <p><strong>IBAN:</strong> PK00 BANK 0000 1234 5678 90</p>
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Description</th>
                    <th>Withdrawals (PKR)</th>
                    <th>Deposits (PKR)</th>
                    <th>Balance (PKR)</th>
                </tr>
            </thead>
            <tbody id="tableBody">
                </tbody>
        </table>
    </div>

    <button onclick="generatePDF()">Download PDF</button>

    <script>
        // Sample data for 4 months
        const transactions = [
            { date: "2025-10-01", desc: "Opening Balance", debit: 0, credit: 0, balance: 150000 },
            { date: "2025-11-05", desc: "Salary Transfer", debit: 0, credit: 85000, balance: 235000 },
            { date: "2025-12-12", desc: "ATM Withdrawal", debit: 20000, credit: 0, balance: 215000 },
            { date: "2026-01-15", desc: "Utility Bill Pay", debit: 12000, credit: 0, balance: 203000 }
        ];

        function loadTable() {
            const body = document.getElementById('tableBody');
            transactions.forEach(t => {
                body.innerHTML += `
                    <tr>
                        <td>${t.date}</td>
                        <td>${t.desc}</td>
                        <td class="debit">${t.debit > 0 ? t.debit.toLocaleString() : '-'}</td>
                        <td class="credit">${t.credit > 0 ? t.credit.toLocaleString() : '-'}</td>
                        <td>${t.balance.toLocaleString()}</td>
                    </tr>`;
            });
        }

        async function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF('p', 'pt', 'a4');
            const element = document.querySelector("#statement");

            await html2canvas(element).then((canvas) => {
                const imgData = canvas.toDataURL('image/png');
                doc.addImage(imgData, 'PNG', 20, 20, 550, 0);
                doc.save("Bank_Statement.pdf");
            });
        }

        loadTable();
    </script>
</body>
</html>
